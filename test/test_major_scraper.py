import unittest
from src.scraper.major_scraper import *

class TestMajorTableParse(unittest.TestCase):
    def test_table_few_extra_reqs(self):
        major_dict = {'entry': [{'program_name': 'Child Studies (CSTU)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/child-studies-cstu/', 'table_obj': '\nCourse List\n\n\n\n\n\n\n\nCode\nTitle\nCredits\n\n\n\nSemester 1\nFRHD*1010Human Development0.50\nNUTR*1010Introduction to Nutrition0.50\nPSYC*1000Introduction to Psychology0.50\n1.00 electives1.00\nSemester 2\nFRHD*1020Couple and Family Relationships0.50\nFRHD*2260Infant Development0.50\nMBG*1000Genetics and Society0.50\nANTH*1150Introduction to Anthropology0.50\nor\xa0SOC*1100 Sociology\n0.50 electives0.50\nSemester 3\nFRHD*2110Children and Youth with Exceptionalities0.50\nFRHD*2270Development in Early and Middle  Childhood0.50\nSTAT*2080Introductory Applied Statistics I0.50\n1.00 electives1.00\nSemester 4\nFRHD*2040Principles of Program Design for  Children0.50\nFRHD*2100Development of Human Sexuality0.50\nPOLS*2230Public Policy0.50\nSTAT*2090Introductory Applied Statistics II0.50\n0.50 electives0.50\nSemester 5\nFRHD*3070Research Methods: Family Studies0.50\nFRHD*3180Observation and Assessment Laboratory0.50\nFRHD*3200Practicum I: Child 11.00\nFRHD*3400Communication and Counselling Skills0.50\nSemester 6\nFRHD*3040Parenting and Intergenerational  Relationships0.50\nFRHD*3190Administration of Programs for Children0.50\n1.50 electives1.50\nSemester 7\nFRHD*4210Senior Seminar in Early Education and  Care0.50\nFRHD*4310Professional Issues0.50\nFRHD*4330Practicum II: Child1.00\n0.50 electives0.50\nSemester 8\nFRHD*4320Social Policies for Children and  Families0.50\nFRHD*4350Practicum III: Child1.00\n1.00 electives or restricted electives1.00\n\n'}]}
        parsed = create_majors(major_dict)
        correct = {'programs': {'CSTU': {'program_name': 'Child Studies (CSTU)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/child-studies-cstu/', 'courses': ['ANTH*1150', 'FRHD*1010', 'FRHD*1020', 'FRHD*2040', 'FRHD*2100', 'FRHD*2110', 'FRHD*2260', 'FRHD*2270', 'FRHD*3040', 'FRHD*3070', 'FRHD*3180', 'FRHD*3190', 'FRHD*3200', 'FRHD*3400', 'FRHD*4210', 'FRHD*4310', 'FRHD*4320', 'FRHD*4330', 'FRHD*4350', 'MBG*1000', 'NUTR*1010', 'POLS*2230', 'PSYC*1000', 'SOC*1100', 'STAT*2080', 'STAT*2090'], 'extra_requirements': {'Electives': '0.50', 'Electives or restricted electives': '1.00'}}}}
        self.assertEqual(parsed, correct)
    def test_table_no_extra_reqs(self):
        major_dict = {'entry': [{'program_name': 'Art History (ARTH)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/art-history-arth/', 'table_obj': '\nCourse List\n\n\n\n\n\n\n\nCode\nTitle\nCredits\n\n\n\nARTH*1510Art Historical Studies I0.50\nARTH*1520Art Historical Studies II0.50\nARTH*2220The Visual Arts Today0.50\nARTH*2480Introduction to Art Theory and Criticism0.50\nARTH*2540Medieval Art0.50\nARTH*2550The Italian Renaissance0.50\nARTH*2600Early Modern Art0.50\nSelect 1.50 credits from the following:\nARTH*2050Modern Latin American Art0.50\nARTH*2060Indigenous Arts in the Americas0.50\nARTH*2070Art of the USA0.50\nARTH*2120Introduction to Museology0.50\nARTH*2150Art and Archaeology of Greece0.50\nARTH*2280Modern Architecture0.50\nARTH*2290History of Photographic Media0.50\nARTH*2490History of Canadian Art0.50\nARTH*2580Late Modern Art: 1900-19500.50\nARTH*2950Baroque Art0.50\nSelect 2.00 credits from the following:\nARTH*3010Contemporary Canadian Art0.50\nARTH*3060Public Art0.50\nARTH*3150Space: Roman Art and Urbanism0.50\nARTH*3200Colour: Practice and Meaning in Western  Art0.50\nARTH*3210Critical Issues in Art History0.50\nARTH*3220Nationalism and Identity in Art0.50\nARTH*3320Lives: Aspects of Western Art0.50\nARTH*3330Display: Visual Culture in Western  Europe0.50\nARTH*3340Studies in Renaissance and Baroque Art0.50\nARTH*3520Idea: Art Since 19500.50\nARTH*3600Topics in the Long Eighteenth Century0.50\nARTH*3620Museum Studies0.50\nARTH*3780Gender and Art0.50\nSelect 2.0 credits from the following 4000-level seminar courses:\nARTH*4310Topics in Art and Visual Culture I1.00\nARTH*4320Topics in Art and Visual Culture II1.00\nARTH*4330Topics in Art and Visual Culture III1.00\nARTH*4340Topics in Art and Visual Culture IV1.00\nARTH*4350Topics in Art and Visual Culture V1.00\n\n'}]}
        parsed = create_majors(major_dict)
        correct = {'programs': {'ARTH': {'program_name': 'Art History (ARTH)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/art-history-arth/', 'courses': ['ARTH*1510', 'ARTH*1520', 'ARTH*2050', 'ARTH*2060', 'ARTH*2070', 'ARTH*2120', 'ARTH*2150', 'ARTH*2220', 'ARTH*2280', 'ARTH*2290', 'ARTH*2480', 'ARTH*2490', 'ARTH*2540', 'ARTH*2550', 'ARTH*2580', 'ARTH*2600', 'ARTH*2950', 'ARTH*3010', 'ARTH*3060', 'ARTH*3150', 'ARTH*3200', 'ARTH*3210', 'ARTH*3220', 'ARTH*3320', 'ARTH*3330', 'ARTH*3340', 'ARTH*3520', 'ARTH*3600', 'ARTH*3620', 'ARTH*3780', 'ARTH*4310', 'ARTH*4320', 'ARTH*4330', 'ARTH*4340', 'ARTH*4350'], 'extra_requirements': {}}}}
        self.assertEqual(parsed, correct)
    def test_table_cis(self):
        major_dict = {'entry': [{'program_name': 'Computer Science (CS)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/computer-science-cs/', 'table_obj': '\nCourse List\n\n\n\n\n\n\n\nCode\nTitle\nCredits\n\n\n\nSemester 1\nCIS*1300Programming0.50\nCIS*1910Discrete Structures in Computing I0.50\nMATH*1200Calculus I0.50\n1.00 credits in the Area of Application or electives1.00\nSemester 2\nCIS*2500Intermediate Programming0.50\nCIS*2910Discrete Structures in Computing II0.50\nMATH*1160Linear Algebra I0.50\n1.00 credits in the Area of Application or electives1.00\nSemester 3\nCIS*2030Structure and Application of  Microcomputers0.50\nCIS*2430Object Oriented Programming0.50\nCIS*2520Data Structures0.50\n1.00 credits in the Area of Application or electives1.00\nSemester 4\nCIS*2750Software Systems Development and  Integration0.75\nCIS*3110Operating Systems I0.50\nCIS*3490The Analysis and Design of Computer  Algorithms0.50\n0.75 credits in the Area of Application or elective0.75\nSemester 5\nCIS*3150Theory of Computation0.50\nCIS*3750System Analysis and Design in  Applications0.75\nSTAT*2040Statistics I0.50\n0.75 credits in the Area of Application or electives0.75\nSemester 6\nCIS*3760Software Engineering0.75\n0.50 CIS electives at the 3000 level or above0.50\n1.25 credits in the Area of Application or electives1.25\nSemester 7\n1.00 credits in the Area of Application or electives1.00\n0.50 credits in CIS at 3000 level or above0.50\n1.00 credits in CIS at the 4000 level1.00\nSemester 8\nCIS*4650Compilers0.50\n1.00 credits in the Area of Application or electives1.00\n0.50 credits in CIS at the 3000 level or above0.50\n0.50 credits in CIS at the 4000 level0.50\n\n'}]}
        parsed = create_majors(major_dict)
        correct = {'programs': {'CS': {'program_name': 'Computer Science (CS)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/computer-science-cs/', 'courses': ['CIS*1300', 'CIS*1910', 'CIS*2030', 'CIS*2430', 'CIS*2500', 'CIS*2520', 'CIS*2750', 'CIS*2910', 'CIS*3110', 'CIS*3150', 'CIS*3490', 'CIS*3750', 'CIS*3760', 'CIS*4650', 'MATH*1160', 'MATH*1200', 'STAT*2040'], 'extra_requirements': {'Credits in the Area of Application or electives': '1.00', 'Credits in the Area of Application or elective': '0.75', 'CIS electives at the 3000 level or above': '0.50', 'Credits in CIS at 3000 level or above': '0.50', 'Credits in CIS at the 4000 level': '0.50', 'Credits in CIS at the 3000 level or above': '0.50'}}}}
        self.assertEqual(parsed, correct)
    def test_table_cis_coop(self):
        major_dict = {'entry': [{'program_name': 'Computer Science Co-op (CS:C)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/computer-science-co-op-csc/', 'table_obj': '\nCourse List\n\n\n\n\n\n\n\nCode\nTitle\nCredits\n\n\n\nSemester 1 - Fall\nCIS*1300Programming0.50\nCIS*1910Discrete Structures in Computing I0.50\nMATH*1200Calculus I0.50\n1.00 credits in the Area of Application or electives1.00\nSemester 2 - Winter\nCIS*2500Intermediate Programming0.50\nCIS*2910Discrete Structures in Computing II0.50\nMATH*1160Linear Algebra I0.50\n1.00 credits in the Area of Application or electives1.00\nSummer Semester - Off\nSemester 3 - Fall\nCIS*2030Structure and Application of  Microcomputers0.50\nCIS*2430Object Oriented Programming0.50\nCIS*2520Data Structures0.50\nCOOP*1100Introduction to Co-operative Education0.00\n1.00 credits in the Area of Application or electives1.00\nSemester 4 - Winter\nCIS*2750Software Systems Development and  Integration0.75\nCIS*3110Operating Systems I0.50\nCIS*3490The Analysis and Design of Computer  Algorithms0.50\n0.75 credits in the Area of Application or elective0.75\nSummer Semester\nCOOP*1000Co-op Work Term I0.50\nFall Semester\nCOOP*2000Co-op Work Term II0.50\nSemester 5 - Winter\nCIS*3750System Analysis and Design in  Applications0.75\n0.50 CIS electives at the 3000 level or above0.50\n1.25 credits in the Area of Application or electives1.25\nSummer Semester\nCOOP*3000Co-op Work Term III0.50\nSemester 6 - Fall\nCIS*3150Theory of Computation0.50\nCIS*3760Software Engineering0.75\nSTAT*2040Statistics I0.50\n0.75 credits in the Area of Application or electives0.75\nWinter Semester\nCOOP*4000Co-op Work Term IV0.50\nSummer Semester\nCOOP*5000Co-op Work Term V0.50\nSemester 7 - Fall\n1.00 credits in the Area of Application or electives1.00\n0.50 credits in CIS at 3000 level or above0.50\n1.00 credits in CIS at the 4000 level1.00\nSemester 8 - Winter\nCIS*4650Compilers0.50\n1.00 credits in the Area of Application or electives1.00\n0.50 credits in CIS at 3000 level or above0.50\n0.50 credits in CIS at the 4000 level0.50\n\n'}]}
        parsed = create_majors(major_dict)
        correct = {'programs': {'CS:C': {'program_name': 'Computer Science Co-op (CS:C)', 'program_link': 'https://calendar.uoguelph.ca//undergraduate-calendar/programs-majors-minors/computer-science-co-op-csc/', 'courses': ['CIS*1300', 'CIS*1910', 'CIS*2030', 'CIS*2430', 'CIS*2500', 'CIS*2520', 'CIS*2750', 'CIS*2910', 'CIS*3110', 'CIS*3150', 'CIS*3490', 'CIS*3750', 'CIS*3760', 'CIS*4650', 'COOP*1000', 'COOP*1100', 'COOP*2000', 'COOP*3000', 'COOP*4000', 'COOP*5000', 'MATH*1160', 'MATH*1200', 'STAT*2040'], 'extra_requirements': {'Credits in the Area of Application or electives': '1.00', 'Credits in the Area of Application or elective': '0.75', 'CIS electives at the 3000 level or above': '0.50', 'Credits in CIS at 3000 level or above': '0.50', 'Credits in CIS at the 4000 level': '0.50'}}}}
        self.assertEqual(parsed, correct)
        